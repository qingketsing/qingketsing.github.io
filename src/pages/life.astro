---
import '../styles/global.css';

const allPosts = await Astro.glob('../blogs/*.md');
const latestPosts = allPosts
  .map((post: any) => ({
    ...post.frontmatter,
    url: `/blog/${post.file.split('/').pop().split('.').shift()}`,
  })).sort((a: any, b: any) => new Date(b.pubDate).getTime() - new Date(a.pubDate).getTime());

//只提取type为随想的文章
const randomPosts = allPosts
  .map((post: any) => ({
    ...post.frontmatter,
    url: `/blog/${post.file.split('/').pop().split('.').shift()}`,
  })).filter((post: any) => post.type === '随想').sort((a: any, b: any) => new Date(b.pubDate).getTime() - new Date(a.pubDate).getTime());
// 只提取type为生活的文章
const lifePosts = allPosts
  .map((post: any) => ({
    ...post.frontmatter,
    url: `/blog/${post.file.split('/').pop().split('.').shift()}`,
  })).filter((post: any) => post.type === '生活').sort((a: any, b: any) => new Date(b.pubDate).getTime() - new Date(a.pubDate).getTime());
// 只提取type为技术的文章
const techPosts = allPosts
  .map((post: any) => ({
    ...post.frontmatter,
    url: `/blog/${post.file.split('/').pop().split('.').shift()}`,
  })).filter((post: any) => post.type === '技术').sort((a: any, b: any) => new Date(b.pubDate).getTime() - new Date(a.pubDate).getTime());
// 只提取type为评测的文章
const reviewPosts = allPosts
  .map((post: any) => ({
    ...post.frontmatter,
    url: `/blog/${post.file.split('/').pop().split('.').shift()}`,
  })).filter((post: any) => post.type === '评测').sort((a: any, b: any) => new Date(b.pubDate).getTime() - new Date(a.pubDate).getTime());
---

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>欢迎来到Qingke的小窝</title>
</head>

<body class="bg-white">
  
  <aside class="fixed left-[150px] top-[35px] min-w-full md:min-w-0 xl:basis-1/3 xl:h-screen "> 
    <div class="pt-12 xl:pt-28"></div>
    <div>
      <div class="w-64 flex flex-col items-center">
        <img class="w-32 h-32 md:w-52 md:h-52 rounded-full mx-auto" src="../My_pic.jpg" alt="Qingke"> 
        <div class="pt-10"></div>
        <h1 class="text-4xl font-bold text-center text-gray-800">Qingke</h1>
        <div class="pt-2 xl:pt-5"></div>
        <p class="text-xl text-center text-gray-800">我们在地板上睡过</p> 
        <p class="text-xl text-center text-gray-800">我们在河水中淌过</p> 
        <!--生成四个方块，边长20px，间距10px，横向排列-->
        <div class="pt-5"></div>
        <div class="flex space-x-2">
          <a href="https://github.com/qingketsing" class="w-14 h-14 rounded-lg">
            <img src="../github-box.png" alt="">
          </a>
          <a href="https://space.bilibili.com/548020217" class="w-14 h-14 rounded-lg">
            <img src="../哔哩哔哩.png" alt="">
          </a>
          <a href="https://www.zhihu.com/people/qing-ke-tsing" class="w-14 h-14 rounded-lg">
            <img src="../知乎.png" alt="">
          </a>
          <a href="https://music.163.com/#/user/home?id=12216179252" class="w-14 h-14 rounded-lg">
            <img src="../网易云音乐.png" alt="">
          </a>
      </div>
    </div>
  </aside>
  <div class="pt-10 xl:pt-16"></div>

  <div class=" col-span-4 bg-gray-200 ml-[500px] mr-[100px] rounded-lg shadow-lg p-5 hover:bg-primary-focus hover:shadow-gray-500">
    <!-- Categories navigation -->
    <div class="flex space-x-6 mb-8 text-gray-700 font-medium">
      <a href="/latest" class="hover:text-primary w-[100px] h-[50px] bg-gray-50 items-center rounded-lg shadow-md hover:bg-primary-focus hover:shadow-gray-500">
        <div class="font-bold text-2xl content-center items-center pl-6 pt-2">
          最新
        </div>
      </a>
      <a href="/thinking" class="hover:text-primary w-[100px] h-[50px] bg-gray-50 items-center rounded-lg shadow-md hover:bg-primary-focus hover:shadow-gray-500">
        <div class="font-bold text-2xl content-center items-center pl-6 pt-2">
          随想
        </div>
      </a>
      <a href="#" class="hover:text-primary w-[100px] h-[50px] bg-gray-50 items-center rounded-lg shadow-md hover:bg-primary-focus hover:shadow-gray-500">
        <div class="font-bold text-2xl content-center items-center pl-6 pt-2">
          生活
        </div>
      </a>
      <a href="/tech" class="hover:text-primary w-[100px] h-[50px] bg-gray-50 items-center rounded-lg shadow-md hover:bg-primary-focus hover:shadow-gray-500">
        <div class="font-bold text-2xl content-center items-center pl-6 pt-2">
          技术
        </div>
      </a>
      <a href="/review" class="hover:text-primary w-[100px] h-[50px] bg-gray-50 items-center rounded-lg shadow-md hover:bg-primary-focus hover:shadow-gray-500">
        <div class="font-bold text-2xl content-center items-center pl-6 pt-2">
          评测
        </div>
      </a>
      <a href="../" class="hover:text-primary w-[100px] h-[50px] bg-gray-50 items-center rounded-lg shadow-md hover:bg-primary-focus hover:shadow-gray-500">
        <div class="font-bold text-2xl content-center items-center pl-6 pt-2">
          首页
        </div>
      </a>
    </div>
    
    <!-- Article list -->
    <div class="space-y-6">
      <!-- Article 1 -->
      {
        lifePosts.map((post) => (
        <div class="group bg-white rounded-lg shadow-md p-4 hover:bg-gray-100 transition duration-300">
          <a href={post.url} class="text-lg font-semibold group-hover:text-primary block mb-1" >
            {post.title}
          </a>
          <p class="text-gray-600 text-sm">{post.pubDate}</p>
        </div>
        ))
      }

      <div class="pt-[3px]"></div>
    </div>
    
  </div>
  <div class="pt-10"></div>
    
</body>
</html>
